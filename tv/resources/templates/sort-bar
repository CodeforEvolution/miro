<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://www.participatorypolitics.org/"
      xmlns:i18n="http://www.participatoryculture.org/i18n"
      eventCookie="@@@eventCookie@@@" dtvPlatform="@@@dtvPlatform@@@">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />        
</head>
<body>

<t:execOnLoad>
<![CDATA[
global sortBy, sortDirection
sortBy = 'date'
sortDirection = 'ascending'

def setSortBy(by):
    global sortBy, sortDirection
    if sortBy == by:
        if sortDirection == 'ascending':
            sortDirection = 'descending'
        else:
            sortDirection = 'ascending'
    else:
        sortBy = by

def getActiveStateForSortBy(by):
    global sortBy
    if sortBy == by:
        return 'active'
    return ''

def getImageForSortBy(by):
    global sortDirection
    if sortDirection == 'ascending':
        return 'resource:images/sort-up.png'
    return 'resource:images/sort-down.png'
]]>
</t:execOnLoad>

<div id="sort-bar">
    <div id="search-box" t:hideIf="'feed' in localvars and feed.getURL() == 'dtv:search'">
        <input id="search-box" type="search" onfocus="onSearchFocus(this)" onblur="endEditSearch()" value="***_('Search')***"/>
    </div>
    <div id="sort-buttons">
        <span>Sort by:</span>
        
        <a href="#" class="sort-button ***getActiveStateForSortBy('name')***" onclick="return eventURL('action:sortBy?by=name');">
            <div class="left"><div class="right"><div class="mid">
                Name<img src="***getImageForSortBy('name')***"/>
            </div></div></div>
        </a>

        <a href="#" class="sort-button ***getActiveStateForSortBy('date')***" onclick="return eventURL('action:sortBy?by=date');">
            <div class="left"><div class="right"><div class="mid">
                Date<img src="***getImageForSortBy('date')***"/>
            </div></div></div>
        </a>

        <a href="#" class="sort-button ***getActiveStateForSortBy('size')***" onclick="return eventURL('action:sortBy?by=size');">
            <div class="left"><div class="right"><div class="mid">
                Size<img src="***getImageForSortBy('size')***"/>
            </div></div></div>
        </a>

        &nbsp; <!-- This is for WebKit, so the right part of the last button show up correctly -->
    </div>
</div>

</body>
</html>