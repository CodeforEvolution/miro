<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://www.participatorypolitics.org/"
      xmlns:i18n="http://www.participatoryculture.org/i18n"
      eventCookie="@@@eventCookie@@@" dtvPlatform="@@@dtvPlatform@@@">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <t:include filename="dynamic.js" />
    <t:execOnLoad><![CDATA[
# Returns appropriate CSS class based on the item's state
#
# We have to define this here because Python differentiates between
# statements and expressions, so we can't just do this in the
# template. :(
def CSSifyState(this):
    state = this.getState()
    if state == 'newly-downloaded':
        return 'unwatched'
    else:
        return ''
]]></t:execOnLoad>
</head>

<body>
<div class="***CSSifyState(this)*** main-video draggable ***this.getSelectedState(view)***"
        dragsourcetype="***this.getDragType()***" 
        dragsourcedata="itemlist-***this.getID()***" 
        dragicon="video-tnail-***viewName + str(this.getID())***" 
        dragdesttype="***viewName == 'playlistView' and 'downloadeditem' or ''***"
        dragdestdata="playlistitem-***this.getID()***"
        onmousedown="return handleContextMenuSelect(event);" 
        drageffectdownloadeditem="move"
        selectID="***this.getID()***" selectViewName="@@@viewName@@@"
        selectArea='itemlist' 
        onclick="return handleSelect(event);" 
        ondblclick="return handleDblClick(event, '@@@viewName@@@', @@@this.getID()@@@);" >
    <div t:replaceMarkup="this.getItemXML(viewName)" />
</div>
</body>
</html>
