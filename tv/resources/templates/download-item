<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://www.participatorypolitics.org/"
      xmlns:i18n="http://www.participatoryculture.org/i18n">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>

<body>
  <div class="thumbnail_placeholder"><img width="80" height="60" class="thumb" src="***this getThumbnail***" /></div>
  <div class="desc" >
    <div class="video_title" t:replace="this getTitle" />
    <div class="short_description" t:replaceMarkup="this getDescription"/> 
    <div class="file_size"><span t:replace="this getReleaseDate" /> - <span t:replace="this getDuration" /> - <span t:replace="this getTotalSize" /></div>
  </div>

  <div t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="autopending" class="pending_download">
    Pending Automatic Download<br/>
    <a href="action:startDownload?item=@@@this getID@@@">
      <div class="download_button queue"><img src="resource:images/download_button.png" /></div>
    </a>
  </div>

  <div t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="manualpending" class="pending_download">
    Pending Manual Download<br/>
    <span t:replace="this getPendingReason" />
  </div>

  <a t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="stopped" href="action:startDownload?item=@@@this getID@@@">
    <div class="download_button queue"><img src="resource:images/download_button.png" /></div>
  </a>
  
  <div t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="downloading" class="download_button dling">
    <div class="progress"><img src="resource:images/statusbar/@@@this threeDigitPercentDone@@@.png"/><br/><span t:replace="this downloadETA" /><a href="action:expireItem?item=@@@this getID@@@"><img src="resource:images/cancel_button.png" /></a></div>
  </div> 

  <div t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="failed" class="failed_download">
    Download Error
    <span t:replace="this getFailureReason" />
    <a href="action:startDownload?item=@@@this getID@@@">
      <div class="download_button queue"><img src="resource:images/download_button.png" /></div>
    </a>
  </div>

  <div class="play_box" t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="finished">
    <a href="action:playFile?filename=@@@this getFilename@@@" class="play_item"><span/></a>
    <a href="action:keepItem?item=@@@this getID@@@">don't expire</a> | <a href="action:expireItem?item=@@@this getID@@@">delete</a>
  </div>

  <div class="play_box" t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="uploading">
    <a href="action:playFile?filename=@@@this getFilename@@@" class="play_item"><span/></a>
    <a href="action:keepItem?item=@@@this getID@@@">don't expire</a> | <a href="action:expireItem?item=@@@this getID@@@">delete</a>
  </div>
  
  <div class="play_box" t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="watched">
    Expires in <span t:replace="this getExpirationTime"/><br/>
    <a href="action:playFile?filename=@@@this getFilename@@@" class="play_item"><span/></a>
    <a href="action:keepItem?item=@@@this getID@@@">don't expire</a> | <a href="action:expireItem?item=@@@this getID@@@">delete</a>
  </div>

  <div class="play_box" t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="saved">
    Expires in <span t:replace="this getExpirationTime"/><br/>
    <a href="action:playFile?filename=@@@this getFilename@@@" class="play_item"><span/></a>
    <a href="action:expireItem?item=@@@this getID@@@">delete</a>
  </div>
  
  <div class="play_box" t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="paused">
    Downloads Paused
  </div>

  <div class="play_box" t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="expired">
    Expired
    <a href="action:startDownload?item=@@@this getID@@@">
      <div class="download_button queue"><img src="resource:images/download_button.png" /></div>
    </a>
  </div>

</body>
</html>
