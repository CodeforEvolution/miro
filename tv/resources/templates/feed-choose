<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://www.participatorypolitics.org/">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
	@import url(resource:css/style.css);
</style>
<t:include filename="dynamic.js" />

<t:dynamicviews>
 <t:view name="pendingitems" key="feed itemlist">
  <t:filter functionkey="global filter unDownloadedItems" parameter="" />
  <t:sort functionkey="global sort item" parameter="" />
 </t:view>
 <t:view name="downloadeditems" key="feed itemlist">
  <t:filter functionkey="global filter downloadedItems" parameter="" />
  <t:sort functionkey="global sort item" parameter="" />
 </t:view>
</t:dynamicviews>
</head>

<body>
  <div id="main_window"> 
    <div class="channel_title"><span t:replace="feed getTitle"/><a class="settings_button" href="#">Settings</a></div> 
  <div class="channel_tabs"> 
    <a href="template:feed-start"><div class="tab">Watch</div></a>
    <a href="#"><div class="tab  active_tab">Choose</div></a>
    <a href="#"><div class="tab emptytab"><span /></div></a>
    <a href="#"><div class="tab">Library</div></a>
    <div id="searchfield"><input type="text" size="20" onfocus="startEditFilter(this,new Array('pendingitems','downloadeditems'),new Array('',''),new Array('global filter unDownloadedItems','global filter downloadedItems'),new Array(0,0))" onblur="endEditFilter()"  /></div>
  </div> 
  <div id="content_window">
    <ul> 
        <li t:repeatForView="pendingitems">
          <img class="thumb" src="@@@this getThumbnail@@@" />
          <div class="desc" >
            <div class="video_title" t:replace="this title"><a href="action:startDownload?item=@@@tab getID@@@">Title</a></div>
            <div class="short_description" t:replaceMarkup="this getDescription"></div> 
            <div class="file_size"><span t:replace="this getReleaseDate" /> - <span t:replace="this getDuration" /> - <span t:replace="this getTotalSize" /></div>
          </div>
	  <a t:hideIfKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="downloading" href="action:startDownload?item=@@@this getID@@@">
            <div class="download_button queue"><img src="resource:images/in_queue.gif" /></div>
	  </a>
          <div t:hideIfNotKey="this getState" t:hideFunctionKey="global filter substring" t:hideParameter="downloading" class="download_button dling">
       	     <div class="progress"><span t:replace="this getState"/><br/><span t:replace="this downloadETA" /><a href="action:stopDownload?item=@@@this getID@@@"><img src="resource:images/cancel_button.png" /></a></div>
          </div> 
        </li> 
        <li t:repeatForView="downloadeditems">
          <img class="thumb" src="@@@this getThumbnail @@@" />
          <div class="desc" >
            <div class="video_title" t:replace="this title"><a href="action:startDownload?item=@@@tab getID@@@">Title</a></div>
            <div class="short_description" t:replaceMarkup="this getDescription"></div> 
            <div class="file_size"><span t:replace="this getReleaseDate" /> - <span t:replace="this getDuration" /> - <span t:replace="this getTotalSize" /></div>
          </div>
          <a href="action:playFile?filename=@@@this getFilename@@@" class="one_click play_item"><span/></a>
        </li> 
   </ul>
  </div>
  </div> 

</body>
</html>
