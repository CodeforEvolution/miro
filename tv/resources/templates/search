<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://www.participatorypolitics.org/"
      xmlns:i18n="http://www.participatoryculture.org/i18n"
      eventCookie="@@@eventCookie@@@" dtvPlatform="@@@dtvPlatform@@@">

    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link href="resource:css/main.css" rel="stylesheet" type="text/css" />
        <link href="resource:css/search.css" rel="stylesheet" type="text/css" />
        <t:include filename="dynamic.js" />
        <script type="text/javascript" src="resource:templates/search.js" />

        <t:dynamicviews>
            <t:view name="search-feed" key="global view feeds">
                <t:filter functionkey="global filter feedID" parameter="@@@feed getID@@@" />
            </t:view>
            <t:view name="search-items" key="global view items">
                <t:filter functionkey="global filter feedItems" parameter="@@@feed getID@@@" />
                <t:sort functionkey="global sort item" parameter="" />
            </t:view>
        </t:dynamicviews>
    </head>

    <body onload="beginUpdates();">
        <div id="main-titlebar">
        	<div id="main-titlebar-avatar" style="border:0px;"><img src="resource:images/everything_icon.png" /></div>
        	<div id="main-titlebar-channelname">
        		<h1 i18n:translate="">Search</h1>
        	</div>
        	<div id="main-titlebar-tasks">
        	    <!--
    		    <select name="engines" style="display: inline">
    		        <option value="yahoo">Yahoo</option>
    		        <option value="google">Google</option>
    		    </select>
		        -->
    		    <input type="search" name="searchquery" value="@@@feed lastQuery@@@" placeholder="Yahoo" 
    		           class="main-titlebar-tasks-search" style="margin-top:38px;" 
    		           onKeyUp="fillSearch(this.value)" onKeyPress="validateSearch(event, this.value)" />
        	</div>
        </div>

        <div id="main-container">
            <div t:updateForView="search-feed">
                <div class="search-message" t:hideIfNotKey="feed getStatus" t:hideFunctionKey="global filter equal" t:hideParameter="idle-empty">
                    Nothing to display.<br />
                    Enter a query in the search field above.
                </div>
                <div class="search-message" t:hideIfNotKey="feed getStatus" t:hideFunctionKey="global filter equal" t:hideParameter="searching">
                    Searching...
                </div>
            </div>
            
            <div id="search-results">
                <span t:repeatForView="search-items">
                    <t:includeTemplate filename="download-item" />
                </span>
            </div>
        </div>
    </body>

</html>
